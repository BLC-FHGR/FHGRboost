define(["exports","jquery","theme_htwboost/d3","theme_htwboost/fbloader","theme_htwboost/fbbarchart","theme_htwboost/fbbubblechart","theme_htwboost/fbboxchart"],function(a,s,n,t,b,i,l){function e(){g?g.selectAll("*").remove():g=n.select("#feedback_analysis").append("svg").attr("width","100%").attr("height","100%")}function r(){e(),t.load(l.renderChart(g))}function c(){e(),t.load(i.renderChart(g))}function o(){e(),t.load(b.renderChart(g))}function f(){s("#fbanalysis_liveupdate").toggleClass("btn-warning"),s("#fbanalysis_liveupdate").toggleClass("btn-outline-warning"),t.toggleLiveUpdate()}function h(a){"#fbanalysis_boxchart"!==a&&(s("#fbanalysis_boxchart").removeClass("btn-primary"),s("#fbanalysis_boxchart").addClass("btn-outline-primary")),"#fbanalysis_barchart"!==a&&(s("#fbanalysis_barchart").removeClass("btn-primary"),s("#fbanalysis_barchart").addClass("btn-outline-primary")),"#fbanalysis_bubblechart"!==a&&(s("#fbanalysis_bubblechart").removeClass("btn-primary"),s("#fbanalysis_bubblechart").addClass("btn-outline-primary")),e()}function p(){s("#fbanalysis_boxchart").toggleClass("btn-primary"),s("#fbanalysis_boxchart").toggleClass("btn-outline-primary"),h("#fbanalysis_boxchart"),m("#fbanalysis_boxchart"),r()}function y(){s("#fbanalysis_barchart").toggleClass("btn-primary"),s("#fbanalysis_barchart").toggleClass("btn-outline-primary"),h("#fbanalysis_barchart"),m("#fbanalysis_barchart"),s("#fbanalysis_barchart").hasClass("btn-primary")&&o()}function d(){s("#fbanalysis_bubblechart").toggleClass("btn-primary"),s("#fbanalysis_bubblechart").toggleClass("btn-outline-primary"),h("#fbanalysis_bubblechart"),m("#fbanalysis_bubblechart"),s("#fbanalysis_bubblechart").hasClass("btn-primary")&&c()}function u(){window.print()}function _(){s(".feedback_info:first-child").before('<div id="feedback_analysis" class="hidden">'),s(".form-buttons").prepend('<div id="feedback_vizbuttons" class="singlebutton">'),s("#feedback_vizbuttons").append('<span id="fbanalysis_barchart" class="btn btn-outline-primary">Bar Chart</span>').append('<span id="fbanalysis_bubblechart" class="btn btn-outline-primary">Bubble Chart</span>').append('<span id="fbanalysis_boxchart" class="btn btn-outline-primary">Box Chart</span>').append('<span id="fbanalysis_liveupdate" class="btn btn-outline-warning">Live Update (beta)</span>').append('<span id="fbanalysis_print" class="btn btn-outline-warning">Print Page</span>'),s("#fbanalysis_barchart").click(y),s("#fbanalysis_boxchart").click(p),s("#fbanalysis_bubblechart").click(d),s("#fbanalysis_liveupdate").click(f),s("#fbanalysis_print").click(u)}function m(a){s(a).hasClass("btn-primary")?s("#feedback_analysis").removeClass("hidden"):(s("#feedback_analysis").addClass("hidden"),t.clearHandler())}var g;a.checkFeedbackAnalysis=function(){var a=window.location.pathname.split("/"),s=a.pop();"feedback"===a.pop()&&"analysis.php"===s&&_()}});
